<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>APIForge - 智能API捕获与工具生成平台</title>
  <link rel="stylesheet" href="styles/style.css">
</head>
<body>
  <div class="app-container">
    <!-- 第一栏：知识库管理 -->
    <div class="panel knowledge-panel">
      <div class="panel-header">
        <h3>知识库管理</h3>
        <div class="knowledge-controls">
          <button id="addKnowledgeBtn" class="add-btn">添加知识</button>
        </div>
      </div>
      <div class="panel-content">
        <div class="knowledge-search">
          <input type="text" id="knowledgeSearch" placeholder="搜索知识..." class="filter-input">
        </div>
        
        <div class="knowledge-list">
          <h4>已有知识:</h4>
          <div id="knowledgeList" class="knowledge-items"></div>
        </div>
        
        <div class="knowledge-stats">
          <div class="stat-item">
            <span class="stat-label">总数:</span>
            <span id="knowledgeCount" class="stat-value">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">可用:</span>
            <span id="availableKnowledgeCount" class="stat-value">0</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 第二栏：聊天页面 -->
    <div class="panel chat-panel">
      <div class="panel-header">
        <h3>AI助手</h3>
        <div class="chat-controls">
          <button id="clearChatBtn" class="clear-btn">清空对话</button>
        </div>
      </div>
      <div class="panel-content">
        <div class="chat-messages" id="chatMessages">
          <div class="welcome-message">
            <div class="system-message">
              <div class="message-icon">🤖</div>
              <div class="message-content">
                <p>您好！我是AI助手，可以帮您：</p>
                <ul>
                  <li>使用录制的API工具回答问题</li>
                  <li>查询知识库中的信息</li>
                  <li>分析网页数据和API调用</li>
                </ul>
                <p>请开始您的提问吧！</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="chat-input-area">
          <div class="input-container">
            <textarea id="chatInput" placeholder="输入您的问题..." rows="2"></textarea>
            <button id="sendChatBtn" class="send-btn">发送</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 第三栏：网页浏览器 -->
    <div class="panel browser-panel">
      <div class="panel-header">
        <h3>网页浏览器</h3>
        <div class="browser-controls">
          <input type="text" id="urlInput" placeholder="输入网址...">
          <button id="loadBtn">加载</button>
          <button id="startInterceptBtn" class="intercept-active">停止拦截</button>
        </div>
      </div>
      <div class="panel-content">
        <webview id="webview" src="about:blank" style="width:100%; height:100%;" 
                 allowpopups 
                 disablewebsecurity
                 partition="persist:webview"
                 nodeintegration
                 preload="../webview-preload.js"></webview>
      </div>
    </div>

    <!-- 第四栏：API拦截工具栏 -->
    <div class="panel tools-panel">
      <div class="panel-header">
        <h3>API工具</h3>
        <div class="tools-controls">
          <button id="createToolBtn" class="create-btn">创建工具</button>
        </div>
      </div>
      <div class="panel-content">
        <div class="intercepted-apis">
          <h4>拦截到的API:</h4>
          <div class="filter-container">
            <input type="text" id="apiFilter" placeholder="过滤API (URL、方法、状态码)..." class="filter-input">
            <button id="clearFilterBtn" class="clear-filter-btn">清空过滤</button>
          </div>
          <div id="apiList" class="api-list"></div>
          <button id="clearApisBtn">清空列表</button>
        </div>
        
        <div class="generated-tools">
          <h4>生成的工具:</h4>
          <div id="generatedTools" class="generated-tools-list"></div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>